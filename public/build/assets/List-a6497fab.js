import{R as l,a as t,j as i,F as o,n as h}from"./app-0ab6609c.js";import{A as n,N as b,S as u}from"./ApiService-7d0db038.js";class p extends l.Component{constructor(s){super(s)}getTableRow(s,e){return t("tr",{children:this.props.tableHeaders.map(function(a,c){let r=s;return a.index&&(r=s[a.index]),a.callback&&(r=a.callback(r)),t("td",{className:"px-4 py-4 whitespace-nowrap",children:r},c)})},e)}render(){return i("table",{className:"min-w-full divide-y divide-gray-200",children:[t("thead",{className:"bg-gray-200",children:t("tr",{children:this.props.tableHeaders.map(function(s,e){return t("th",{className:"py-3.5 px-4 text-left",children:s.label},e)})})}),t("tbody",{className:"bg-white divide-y divide-gray-200",children:this.props.tableData.map(this.getTableRow.bind(this))})]})}}class f extends l.Component{constructor(s){super(s),this.state={isOrdersLoading:!0,orders:{data:[],pagination:{}},tableHeaders:[{label:"Order ID",index:"id",callback:function(e){return e}},{label:"Billing Name",index:"billing_address",callback:function(e){return`${e.first_name} ${e.last_name}`}},{label:"Order Total",index:"total_inc_tax",callback:function(e){return e}},{label:"Order Status",callback:function(e){let a="badge badge-";return e.status_id===5?a+="danger":e.status_id===2||e.status_id===10?a+="success":a+="light",t("span",{className:a,children:e.status})}},{label:"Actions",callback:function(e){if(e.status_id!==5)return t("button",{type:"button",className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:a=>this.cancelOrder(e.id,a),children:"Cancel"})}.bind(this)}]}}componentWillMount(){this.loadOrders()}loadOrders(){n.getOrders({limit:5}).then(this.handleOrdersResponse.bind(this))}handleOrdersResponse(s){this.setState({isOrdersLoading:!1,orders:{data:s.data}})}cancelOrder(s){const e={status_id:5};this.setState({isOrdersLoading:!0}),n.updateOrder(s,e).then(this.loadOrders.bind(this))}hasOrders(){return this.state.orders.data.length>0}render(){return i(o,{children:[t(h,{title:"Order List"}),t(b,{}),t("div",{className:"container mx-auto p-5",children:i("div",{className:"content col-span-3 grid-col-3 rounded bg-gray-100 shadow-lg p-4",children:[t("h2",{className:"text-xl font-bold mb-6",children:"List of Orders"}),this.state.isOrdersLoading?t(u,{}):this.hasOrders()?t("section",{children:t(p,{tableHeaders:this.state.tableHeaders,tableData:this.state.orders.data})}):t("section",{children:t("div",{className:"emptyTable",children:"No orders exist yet!"})})]})})]})}}export{f as default};
